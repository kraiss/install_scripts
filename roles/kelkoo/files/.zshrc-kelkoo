export M2_HOME=$HOME/apache-maven/current
export M2=$M2_HOME/bin
export MAVEN_OPTS="-Xms256m -Xmx1024m"
export PATH="$M2:$PATH"
export DOCKER_HOST="unix://$XDG_RUNTIME_DIR/podman/podman.sock"
export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"

alias git-scalafmt-amend="sbt scalafmtAll; git add .; git amendf; git pushf"
alias git-prettier-amend="mvn prettier:write; git add .; git amendf; git pushf"
alias git-spotless-amend="mvn spotless:apply; git add .; git amendf; git pushf"
alias sbt-deprecation="sbt '; set ThisBuild/scalacOptions ++= Seq(\"-unchecked\", \"-deprecation\") ; test'"

vpn-del-conn () {
  nmcli con down $1
}

kk-opening-ops-daily() {
  urls=(
    "https://grafana.dc1.kelkoo.net/d/WFyYWxU4k/services-status"
    "https://svg.kelkoo.net/"
    "https://opsgenie-dashboard-prod.k8s.kelkoo.net/"
    "https://grafana.dc1.kelkoo.net/goto/af0wnb4ywd7nkb?orgId=1"
  )
  nohup firefox ${urls[@]} > /dev/null &
}

kk-opening-ops-weekly() {
  urls=(
    "https://superset.prod.kelkoo.net/superset/dashboard/199"
    "https://grafana.dc1.kelkoo.net/d/cc2421d2-d250-4d08-aca2-f8bbe4d2e784/real-time-leads?orgId=1"
  )
  nohup firefox ${urls[@]} > /dev/null &
}

kk-opening-dev-daily() {
  urls=(
    "https://gitlab.corp.kelkoo.net/groups/tracking/-/merge_requests"
    "https://gitlab.corp.kelkoo.net/common/kelkoo-default-renovate-config/-/merge_requests"
    "https://gitlab.corp.kelkoo.net/common/debt-watcher/-/merge_requests"
    "https://gitlab.corp.kelkoo.net/dashboard/merge_requests"
    "https://debt-watcher-prod.k8s.kelkoo.net/?repo_groups=tracking"
  )
  nohup firefox ${urls[@]} > /dev/null &
}

kk-opening-dev-weekly() {
  urls=(
    "https://gitlab.corp.kelkoo.net/k8s/k8stracking/-/merge_requests"
    "https://gitlab.corp.kelkoo.net/common/kelkoo-kafka-scala/-/merge_requests"
    "https://gitlab.corp.kelkoo.net/common/kelkoo-scala-toolkit/-/merge_requests"
    "https://gitlab.corp.kelkoo.net/common/java-processing-healthcheck/-/merge_requests"
  )
  nohup firefox ${urls[@]} > /dev/null &
}

publisher-find-tracking-ids() {
  pub_id=$1
  curl -s "https://pmws.prod.dc1.kelkoo.net/hierarchy/list?publisherId=$pub_id" | jq 'map(.trackingId)'
}
